<div class="w-full px-4 sm:px-6 md:px-8 lg:max-w-[1200px] lg:mx-auto mt-16 mb-16">
  <div *ngIf="loading" class="p-8 bg-white/5 rounded-lg text-center">Cargando habitación...</div>

  <div *ngIf="error" class="p-8 bg-red-600/10 text-red-500 rounded-lg">
    Error al cargar la habitación.
  </div>

  <ng-container *ngIf="!loading && !error && room">
    <nav class="text-sm text-gray-300 mb-4">
      <a class="hover:underline" routerLink="/explore">Explorar</a>
      <span class="px-2">/</span>
      <span class="text-white">Habitación {{ room.number }}</span>
    </nav>

    <div class="bg-white/3 rounded-xl p-6 lg:p-8 grid gap-6 lg:grid-cols-3">
      <!-- LEFT: Images + basic info -->
      <div class="lg:col-span-2 flex flex-col gap-6">
        <!-- Images carousel -->
        <div class="rounded-lg overflow-hidden bg-black/20">
          <div class="flex gap-3 overflow-x-auto snap-x snap-mandatory scrollbar-hide p-4">
            @if (room.imageUrls && room.imageUrls.length > 0) {
              @for (photo of room.imageUrls; track $index) {
                <img
                  [src]="photo"
                  [alt]="'Imagen habitación ' + room.number"
                  [title]="'Imagen habitación ' + room.number"
                  class="w-[320px] sm:w-[420px] md:w-[520px] h-60 md:h-72 object-cover rounded-lg shrink-0 snap-center"
                />
              }
            } @else {
              <img
                src="./assets/images/ubikLogo.jpg"
                alt="Imagen por defecto"
                title="Imagen por defecto"
                class="w-full h-72 object-cover rounded-lg"
              />
            }
          </div>
        </div>

        <!-- Title / price / meta -->
        <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4">
          <div>
            <h1 class="text-2xl sm:text-3xl font-semibold">
              {{ room.roomType }} — {{ room.number }}
            </h1>
            <p class="text-sm text-gray-300 mt-1">{{ room.motelCity }} • {{ room.motelAddress }}</p>
          </div>

          <div class="flex items-center gap-4">
            <div
              class="px-3 py-1 rounded-full text-sm font-medium"
              [ngClass]="room.isAvailable ? 'bg-green-600 text-white' : 'bg-gray-700 text-gray-200'"
            >
              @if(room.isAvailable){
                <span >Disponible</span>
              }@else if(!room.isAvailable){
                <span>No disponible</span>
              }
            </div>
          </div>
        </div>

        <!-- Description -->
        <section class="bg-white/5 rounded-lg p-4">
          <h3 class="font-semibold mb-2">Descripción</h3>
          <p class="text-gray-200">{{ room.description }}</p>
        </section>

        <!-- Services / Features -->
        <section class="bg-white/5 rounded-lg p-4">
          <h3 class="font-semibold mb-3">Servicios</h3>
          <div class="flex flex-wrap gap-2">
            @if (room.serviceIds && room.serviceIds.length) {
              @for (svc of room.serviceIds; track $index) {
                <span class="px-3 py-1 bg-white/6 rounded-full text-sm">
                  <!-- {{ svc?.service_id?.[0]?.name ?? 'Servicio' }} -->
                    servicio
                </span>
              }
            } @else {
              <span class="text-gray-400">Sin servicios listados</span>
            }
          </div>
        </section>
      </div>

      <!-- RIGHT: Booking & Map -->
      <aside class="flex flex-col gap-6">
        <div class="p-4 rounded-lg bg-white/5">
          <div class="flex items-baseline justify-between">
            <div>
              <div class="text-3xl font-bold">${{ room.price }}</div>
            </div>
          </div>

          <div class="mt-4">
            <button
              class="w-full bg-emerald-500 hover:bg-emerald-600 text-white py-3 rounded-lg font-semibold"
            >
              Reservar ahora
            </button>
          </div>

          <div class="mt-4 text-sm text-gray-300">
            <div><strong>Dirección:</strong> {{ room.motelAddress }}</div>
            <div class="mt-1"><strong>Ciudad:</strong> {{ room.motelCity }}</div>
            <div class="mt-1"><strong>Horas:</strong> </div>
          </div>
        </div>

        <div class="rounded-lg overflow-hidden bg-white/5 h-64">
          <h4 class="px-4 pt-4 text-sm text-gray-300">Ubicación</h4>
          <div class="p-4 h-[calc(100%-40px)]">
            <app-map [points]="points"></app-map>
          </div>
        </div>

        <div class="p-4 rounded-lg bg-white/5">
          <h4 class="font-semibold mb-2">Contacto del motel</h4>
          <p class="text-sm text-gray-300">Teléfono: {{ room.motelPhoneNumber }}</p>
        </div>
      </aside>
    </div>
  </ng-container>
</div>
