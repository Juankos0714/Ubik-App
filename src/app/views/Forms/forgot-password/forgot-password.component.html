
<div class="mb-28 mt-28 flex items-center justify-center ">

  <!-- Card -->
  <div class="w-full max-w-md bg-white/10 backdrop-blur-md rounded-2xl shadow-2xl p-8 border border-white/20">

    <h1 class="text-3xl font-bold mb-6 tracking-wider text-center">RECUPERAR CONTRASEÑA</h1>

    <form [formGroup]="form" (submit)="$event.preventDefault()">

      <!-- STEP 1 -->
      @if (step() === 1) {
        <div class="space-y-4 flex items-center flex-col ">
          <div>
            <input
              type="email"
              formControlName="email"
              placeholder="Correo electrónico"
              class="w-full px-3 py-2 rounded-lg bg-gray-700 border border-gray-600"
            />
          </div>

          <button
            type="button"
            (click)="sendEmail()"
            [disabled]="loading()"
            class="
              bg-linear-to-r from-[#6E2A35] to-[#A72027]
              text-white 
              font-medium 
              rounded-lg
              text-center 
              hover:from-[#7E3A45]
              hover:to-[#B73037] 
              transition-colors 
              cursor-pointer
              flex items-center 
              justify-between 
              gap-2
              p-2.5
              text-overflow: ellipsis;
              text-clip
            "
          >
            {{ loading() ? 'Enviando...' : 'Enviar codigo' }}
          </button>
        </div>
      }

      <!-- STEP 2 -->
      @if (step() === 2) {
        <div class="space-y-4 flex items-center flex-col">

          <input type="text" formControlName="token" placeholder="Token"
            class="w-full px-3 py-2 rounded-lg bg-gray-700 border border-gray-600" />

          @if (form.controls.token.touched && form.controls.token.invalid) {
            <p class="text-red-400 text-sm">El token es obligatorio.</p>
          }

          <input type="password" formControlName="newPassword" placeholder="Nueva contraseña"
            class="w-full px-3 py-2 rounded-lg bg-gray-700 border border-gray-600" />

          @if (form.controls.newPassword.touched && form.controls.newPassword.invalid) {
            <p class="text-red-400 text-sm">La contraseña no cumple los requisitos.</p>
          }

          @if (error()) {
            <p class="text-red-400 text-sm">{{ error() }}</p>
          }

          @if (success()) {
            <p class="text-green-400 text-sm">{{ success() }}</p>
          }

          @if (error()) {
            <p class="text-red-400 text-sm">{{ error() }}</p>
          }


          <button type="button" (click)="resetPassword()" [disabled]="loading()"
            class="
              bg-linear-to-r from-[#6E2A35] to-[#A72027]
              text-white 
              font-medium 
              rounded-lg
              text-center 
              hover:from-[#7E3A45]
              hover:to-[#B73037] 
              transition-colors 
              cursor-pointer
              flex items-center 
              justify-between 
              gap-2
              p-2.5
              text-overflow: ellipsis;
              text-clip
            ">
            {{ loading() ? 'Cambiando...' : 'Cambiar contraseña' }}
          </button>

        </div>
      }

    </form>


  </div>
</div>
