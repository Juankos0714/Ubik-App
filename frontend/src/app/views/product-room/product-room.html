@if (!loading && product) {
    <div class="p-4">
      <!-- Main Image -->
      <div class="relative rounded-lg overflow-hidden mb-4">
        <img 
          [src]="selectedImage" 
          [alt]="product.room_type"
          class="w-full h-64 object-cover"
        />
      </div>

      <!-- Thumbnail Images -->
      @if (product.photos && product.photos.length > 0) {
        <div class="flex gap-2 mb-6 overflow-x-auto pb-2">
          @for (photo of product.photos; track photo.id; let i = $index) {
            <button 
              (click)="selectImage(photo.url, i)"
              [class.ring-2]="currentImageIndex === i"
              class="flex-shrink-0 w-16 h-16 rounded-lg overflow-hidden ring-red-600 transition-all"
            >
              <img 
                [src]="photo.url" 
                [alt]="photo.description || 'Thumbnail ' + (i + 1)"
                class="w-full h-full object-cover"
              />
            </button>
          }
        </div>
      }

      <!-- Product Title & Actions -->
      <div class="flex items-start justify-between mb-2">
        <div class="flex-1">
          <h2 class="text-2xl font-bold">{{ product.room_type }} - {{ product.num_or_name }}</h2>
          <p class="text-xl text-red-600 font-semibold mt-1">
            {{ formatPrice(product.price) }}
          </p>
        </div>
        <div class="flex gap-2">
          <!-- Favorite Button -->
          <button 
            (click)="toggleFavorite()"
            class="text-white hover:text-red-600 transition-colors"
          >
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z" />
            </svg>
          </button>
          <!-- Star Button -->
          <button class="text-white hover:text-yellow-500 transition-colors">
            <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
                d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
            </svg>
          </button>
        </div>
      </div>

      <!-- Location -->
      <div class="flex items-center gap-2 text-sm text-neutral-400 mb-4">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
            d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
        </svg>
        <span>Armenia, Quindío</span>
      </div>

      <!-- Services/Amenities -->
      @if (product.services && product.services.length > 0) {
        <div class="mb-4">
          <h3 class="text-lg font-semibold mb-2">Servicios incluidos:</h3>
          <div class="flex flex-wrap gap-2">
            @for (service of product.services; track service.id) {
              <span class="bg-neutral-800 text-neutral-300 px-3 py-1 rounded-full text-sm">
                {{ service.name }}
              </span>
            }
          </div>
        </div>
      }

      <!-- Description -->
      <p class="text-neutral-300 mb-6 leading-relaxed">
        {{ product.description }}
      </p>

      <!-- More Information Button -->
      <button 
        (click)="showMoreInfo()"
        class="
          text-white 
          font-medium 
          mb-4
          flex 
          items-center 
          gap-2
          hover:text-red-600
          transition-colors
        "
      >
        <span>Más información</span>
        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
        </svg>
      </button>

      <!-- Reserve Button -->
      <button 
        (click)="makeReservation()"
        class="
          bg-gradient-to-r 
          from-[#6E2A35] 
          to-[#A72027]
          text-white 
          font-medium 
          rounded-lg
          w-full
          text-center 
          hover:from-[#7E3A45]
          hover:to-[#B73037] 
          transition-colors 
          cursor-pointer
          flex 
          items-center 
          justify-center
          gap-2
          p-3
          mb-6
        "
      >
        <span>Realizar reserva</span>
      </button>

      <!-- Map 
      <div class="rounded-lg overflow-hidden mb-4">
        <img 
          src="https://via.placeholder.com/800x400/2d3748/cbd5e0?text=Mapa+de+Ubicación" 
          alt="Ubicación en el mapa"
          class="w-full h-48 object-cover"
        />
      </div>-->
    </div>
  }
    
  <!-- Error State -->
  @if (!loading && !product) {
    <div class="flex flex-col items-center justify-center h-96 px-4">
      <svg class="w-16 h-16 text-neutral-600 mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" 
          d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
      </svg>
      <h3 class="text-xl font-semibold text-neutral-400 mb-2">Producto no encontrado</h3>
      <p class="text-neutral-500 text-center mb-4">No pudimos cargar la información del producto.</p>
      <button 
        (click)="goBack()"
        class="
          border 
          border-[#8B0000] 
          text-[#cc3a3a] 
          bg-transparent 
          font-medium 
          rounded-lg
          px-6
          py-2
          hover:bg-[#8B0000]/10
          transition-colors
        "
      >
        Volver atrás
      </button>
    </div>
}
